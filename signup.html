<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="style.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
</head>
<body>
<div class="container row mt-5">
    <div style="z-index: 222" class="col-xl-5 offset-2 p-2 box-shadow border text-center">
        <h4>Sign Up</h4>
        <form class="mt-5">
            <!-- Email input -->
            <div class="form-outline mb-4">
                <label class="form-label" for="username">Username: </label>
                <input type="text" id="username" placeholder="Choose a username" class="form-control"/>
                <div id="show-err-message-username">
                    * Username ne peut pas être vide et comporte au moins 3 caractères et ne peut pas dépasser 25
                    caractères !
                </div>
            </div>
            <!-- Email input -->
            <div class="form-outline mb-4">
                <label class="form-label" for="email">Email:</label>
                <input type="email" id="email" placeholder="Enter your email" class="form-control"/>
                <div id="show-err-message-email">
                    * Adresse mail invalide !
                </div>
            </div>

            <!-- Password input -->
            <div class="form-outline mb-4">
                <label class="form-label" for="password">Password:</label>
                <input type="password" placeholder="Enter a strong password" id="password" class="form-control"/>
                <div id="show-err-message-password">
                    * Le mot de passe doit contenir au moins 8 caractères, dont au moins 1 minuscule, 1
                    majuscule, 1 chiffre et 1 caractère spécial (!@#$%^&*)!
                </div>
            </div>

            <!-- Password input -->
            <div class="form-outline mb-4">
                <label class="form-label" for="cpassword">Confirm Password:</label>
                <input type="password" placeholder="Reenter your password" id="cpassword" class="form-control"/>
                <div id="show-err-message-cpassword">
                    * Le mot de passe de confirmation doit être le même que le mot de passe. !
                </div>
            </div>

            <!-- Submit button -->
            <button type="button" onclick="validateForm()" class="btn btn-success">Sign Up</button>
        </form>
    </div>
    <div class="col-xl-5" style="background-image: url('./images/javascriptDOM.png'); background-repeat: no-repeat;">
    </div>
</div>

<script>
    // Validate form :
    function validateForm() {
        let isFormValid = true;
        // les inputs :

        let username = document.getElementById("username").value;
        let email = document.getElementById("email").value;
        let password = document.getElementById("password").value;
        let cpassword = document.getElementById("cpassword").value;

        // les messages d'erreurs :
        let usernameMessageErr = document.getElementById("show-err-message-username");
        let emailMessageErr = document.getElementById("show-err-message-email");
        let passwordMessageErr = document.getElementById("show-err-message-password");
        let cpasswordMessageErr = document.getElementById("show-err-message-cpassword");

        if (username.length < 3 || username.length > 25) {
            usernameMessageErr.style.display = 'block';
            isFormValid = false;
        } else {
            usernameMessageErr.style.display = 'none';
        }

        if (!isEmailValid(email)) {
            emailMessageErr.style.display = 'block';
            isFormValid = false;
        } else {
            emailMessageErr.style.display = 'none';
        }

        if (!isPasswordSecure(password)) {
            passwordMessageErr.style.display = 'block';
            isFormValid = false;
        } else {
            passwordMessageErr.style.display = 'none';
        }

        if (password !== cpassword || cpassword === "") {
            cpasswordMessageErr.style.display = 'block';
            isFormValid = false;
        } else {
            cpasswordMessageErr.style.display = 'none';
        }

        if(isFormValid) {
            window.location.replace("file:///C:/Users/PC/Desktop/projet2022Salma/courses.html");
        }
    }

    const isPasswordSecure = (password) => {
        const re = new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])(?=.{8,})");
        return re.test(password);
    };

    const isEmailValid = (email) => {
        const re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        return re.test(email);
    };

</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>
</body>
</html>
